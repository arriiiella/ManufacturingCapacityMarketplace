<div class="row">
  <div class="col-md-6">
    <h2 class="text-center text-primary" aria-label="Add Capacity">
      Add Capacity
    </h2>
  </div>
  <div class="col-md-6">
    <table width="100%" style="text-align: right">
      <tr>
        <td><b>Manufacturer : </b>{{ capacityViewVM?.manufacturerName }}</td>
      </tr>
      <tr>
        <td><b>Location :</b> {{ capacityViewVM?.locationName }}</td>
      </tr>
      <tr>
        <td><b>Machine : </b>{{ capacityViewVM?.machineName }}</td>
      </tr>
    </table>
  </div>
</div>
<div class="col-md-6 offset-md-3">
  <form #locationForm="ngForm" autocomplete="off">
    <hr />
    <div class="form-group row">
      <label
        for="date"
        class="col-sm-3 col-form-label pull-right"
        aria-label="Date"
        >Date</label
      >
      <div class="col-sm-4">
        <div class="form-group">
          <div class="input-group">
            <input
              class="form-control"
              placeholder="yyyy-mm-dd"
              name="machineCapacityEntryDate"
              [(ngModel)]="machineCapacityEntryDate"
              onkeydown="return false"
              (click)="d.toggle()"
              (ngModelChange)="onSelectDate($event)"
              ngbDatepicker
              #d="ngbDatepicker"
            />
          </div>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label
        for="Capacity"
        class="col-sm-3 col-form-label"
        aria-label="Start Time"
        >Start Time</label
      >
      <div class="col-sm-9">
        <div class="input-group">
          <ngb-timepicker
            [(ngModel)]="machineCapacityEntryTime"
            placeholder="HH:MM"
            name="machineCapacityEntryTime"
            onkeydown="return false"
          >
          </ngb-timepicker>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <label
        for="Capacity"
        class="col-sm-3 col-form-label"
        aria-label="Capacity"
        >Capacity <br />
        (In Minutes)</label
      >
      <div class="col-sm-9">
        <div class="input-group">
          <input
            type="number"
            class="form-control"
            name="Capacity"
            [(ngModel)]="MachineCapacityEntryModel.Capacity"
            placeholder="Capacity"
          />
        </div>
      </div>
    </div>
    <div class="form-group text-center">
      <button
        class="btn btn-success mr-2"
        (click)="addMachineEntry()"
        type="submit"
        aria-label="Save"
      >
        Save
      </button>
    </div>
  </form>
</div>

<div [class.ngHide]="searchCriteria.isPageLoad" style="width: 100%">
  <table
    datatable
    [dtOptions]="dtOptions"
    class="row-border hover table table-responsive"
    width="100%"
  >
    <thead
      class="thead-dark"
      [ngClass]="
        SpareCapacitiesModel != null && SpareCapacitiesModel?.length != 0
          ? 'thead-dark'
          : 'thead-dark thead-dark-empty'
      "
    >
      <tr>
        <th aria-label="Location">Location</th>
        <th aria-label="Process">Process</th>
        <th aria-label="Machine">Machine</th>
        <th aria-label="Model">Model</th>
        <th aria-label="Date">Date</th>
        <th aria-label="Start Time">Start Time</th>
        <th aria-label="Capacity">Capacity</th>
        <th></th>
      </tr>
    </thead>
    <tbody
      *ngIf="SpareCapacitiesModel != null || SpareCapacitiesModel?.length != 0"
    >
      <tr *ngFor="let spareView of SpareCapacitiesModel">
        <td style="width: 30%">{{ spareView.locationName }}</td>
        <td style="width: 30%">{{ spareView.processName }}</td>
        <td style="width: 30%">{{ spareView.machineName }}</td>
        <td style="width: 40%">{{ spareView.modelNo }}</td>
        <td style="width: 18%">{{ spareView.date | date: "MM/dd/yyyy" }}</td>
        <td style="width: 2%">
          {{
            spareView.startTime.hours < 9
              ? "0" + spareView.startTime.hours
              : spareView.startTime.hours
          }}:{{
            spareView.startTime.minutes < 9
              ? "0" + spareView.startTime.minutes
              : spareView.startTime.minutes
          }}
        </td>
        <td style="width: 18%">{{ spareView.capacity }}</td>
        <td style="width: 18%">
          <a
            class="pointer"
            (click)="deletePopup(deleteContent, spareView.EntryNo)"
            aria-label="Delete"
            >Delete</a
          >
        </td>
      </tr>
    </tbody>
    <tbody
      *ngIf="SpareCapacitiesModel == null || SpareCapacitiesModel?.length == 0"
    >
      <tr>
        <td
          colspan="7"
          style="width: 100%"
          class="no-data-available"
          aria-label="No Data"
        >
          No data!
        </td>
      </tr>
    </tbody>

    <tbody></tbody>
  </table>
</div>

<ng-template #deleteContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Confirmation</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="d('Cross click')"
    >
      <span aria-hidden="true">X</span>
    </button>
  </div>
  <div class="modal-body">
    <p aria-label="Are you sure you want to delete?">
      Are you sure you want to delete?
    </p>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="d('Cross click')"
      aria-label="Cancel"
    >
      Cancel
    </button>
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="c('yes')"
      aria-label="Yes"
    >
      Yes
    </button>
  </div>
</ng-template>
